<div class="container" *ngIf="!isLoading; else loading">

  <mat-card *ngIf="report">
    <mat-card-title>Reporte</mat-card-title>

    <mat-card-subtitle>
      Fecha: {{ report.createdAt | date:'medium' }}
    </mat-card-subtitle>

    <mat-card-content>

      <p class="content">{{ report.content }}</p>

      <!-- Adjuntos -->
      <div class="attachments" *ngIf="report.attachments?.length">
        <h3>Archivos adjuntos</h3>

        <div class="files">
          <div
            class="file-card"
            *ngFor="let file of report.attachments"
            (click)="openInNewTab(file.url)"
          >

            <img
            style="max-width: 100px;"
              *ngIf="isImage(file.filename)"
              [src]="baseUrl + file.url"
              class="image-preview"
            />

            <div class="file-info">
              <mat-icon>attach_file</mat-icon>
              <span>{{ file.filename }}</span>
            </div>
          </div>
        </div>
      </div>

    </mat-card-content>

    <mat-card-actions>
      <button mat-button (click)="close()">Volver</button>
    </mat-card-actions>
  </mat-card>

</div>

<ng-template #loading>
  <div class="loading">
    <mat-spinner></mat-spinner>
  </div>
</ng-template>
